--[[
Using math.random, write a function to produce a pseudo-random number with a standard normal (Gaussian) distribution.
]]

--[[
Box-muller method (http://en.wikipedia.org/wiki/Normal_distribution).
]]

function ln(x)
  return math.log(x, 2.71828)
end

function gaussianrandom()
  u = math.random()
  v = math.random()

  return math.sqrt(-2 * ln(u)) * math.cos(2 * math.pi * v)
end

bucketsize = 0.1
samples = 10000
range = 3
printstep = 10

distribution = {}

for _ = 1, samples do
  n = gaussianrandom()
  i = math.floor(n / bucketsize + bucketsize / 2)
  distribution[i] = (distribution[i] or 0) + 1
end

for i = -range / bucketsize, range / bucketsize do
  for j = 1, distribution[i], printstep do
    io.write('*')
  end
  io.write('\n')
end

--[[
*
*
*
*
**
**
***
***
****
*****
*****
********
**********
**********
**************
***************
*****************
*******************
**********************
*********************
****************************
**************************
*********************************
*******************************
*********************************
************************************
************************************
****************************************
***************************************
******************************************
***************************************
*************************************
*************************************
***************************************
***********************************
***********************************
**********************************
******************************
*****************************
****************************
**********************
********************
********************
****************
***************
*************
***********
**********
********
*******
******
*****
*****
***
***
**
**
*
*
*
*
]]
